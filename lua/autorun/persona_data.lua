PERSONA = {}

PERSONA["izanagi"] = {}
PERSONA["izanagi"].Model = "models/cpthazama/persona5/persona/izanagi.mdl"
PERSONA["izanagi"].Aura = "jojo_aura_blue"
PERSONA["izanagi"].Name = "Izanagi"

PERSONA["izanagi_picaro"] = {}
PERSONA["izanagi_picaro"].Model = "models/cpthazama/persona5/persona/izanagi.mdl"
PERSONA["izanagi_picaro"].Aura = "jojo_aura_blue"
PERSONA["izanagi_picaro"].Name = "Izanagi Picaro"

PERSONA["izanagi_velvet"] = {}
PERSONA["izanagi_velvet"].Model = "models/cpthazama/persona5/persona/izanagi_velvet.mdl"
PERSONA["izanagi_velvet"].Aura = "jojo_aura_blue"
PERSONA["izanagi_velvet"].Name = "Izanagi (Velvet)"

PERSONA["magatsu_izanagi"] = {}
PERSONA["magatsu_izanagi"].Model = "models/cpthazama/persona5/persona/magatsu_izanagi.mdl"
PERSONA["magatsu_izanagi"].Aura = "jojo_aura_red"
PERSONA["magatsu_izanagi"].Name = "Magatsu-Izanagi"

PERSONA["magatsu_izanagi_picaro"] = {}
PERSONA["magatsu_izanagi_picaro"].Model = "models/cpthazama/persona5/persona/magatsu_izanagi_picaro.mdl"
PERSONA["magatsu_izanagi_picaro"].Aura = "jojo_aura_blue"
PERSONA["magatsu_izanagi_picaro"].Name = "Magatsu-Izanagi Picaro"

PERSONA["magatsu_izanagi_p4"] = {}
PERSONA["magatsu_izanagi_p4"].Model = "models/cpthazama/persona5/persona/magatsu_izanagi.mdl"
PERSONA["magatsu_izanagi_p4"].Aura = "jojo_aura_red"
PERSONA["magatsu_izanagi_p4"].Name = "Magatsu-Izanagi (Classic)"

PERSONA["magatsu_izanagi_velvet"] = {}
PERSONA["magatsu_izanagi_velvet"].Model = "models/cpthazama/persona5/persona/magatsu_izanagi_velvet.mdl"
PERSONA["magatsu_izanagi_velvet"].Aura = "jojo_aura_blue"
PERSONA["magatsu_izanagi_velvet"].Name = "Magatsu-Izanagi (Velvet)"

PERSONA["magatsu_izanagi_okami"] = {}
PERSONA["magatsu_izanagi_okami"].Model = "models/cpthazama/persona5/persona/magatsu_izanagi_no_okami.mdl"
PERSONA["magatsu_izanagi_okami"].Aura = "jojo_aura_red"
PERSONA["magatsu_izanagi_okami"].Name = "Magatsu-Izanagi-no-Okami"

PERSONA["izanagi_okami"] = {}
PERSONA["izanagi_okami"].Model = "models/cpthazama/persona5/persona/izanagi_no_okami.mdl"
PERSONA["izanagi_okami"].Aura = "jojo_aura_blue"
PERSONA["izanagi_okami"].Name = "Izanagi-no-Okami"

PERSONA["thanatos"] = {}
PERSONA["thanatos"].Model = "models/cpthazama/persona5/persona/thanatos.mdl"
PERSONA["thanatos"].Aura = "jojo_aura_blue"
PERSONA["thanatos"].Name = "Thanatos"

PERSONA["tsukiyomi"] = {}
PERSONA["tsukiyomi"].Model = "models/cpthazama/persona5/persona/tsukiyomi.mdl"
PERSONA["tsukiyomi"].Aura = "jojo_aura_red"
PERSONA["tsukiyomi"].Name = "Tsukiyomi"

PERSONA["satanael"] = {}
PERSONA["satanael"].Model = "models/cpthazama/persona5/persona/satanael.mdl"
PERSONA["satanael"].Aura = "jojo_aura_blue"
PERSONA["satanael"].Name = "Satanael"

PERSONA["satanael_small"] = {}
PERSONA["satanael_small"].Model = "models/cpthazama/persona5/persona/satanael.mdl"
PERSONA["satanael_small"].Aura = "jojo_aura_blue"
PERSONA["satanael_small"].Name = "Satanael"

PERSONA["loki"] = {}
PERSONA["loki"].Model = "models/cpthazama/persona5/persona/loki.mdl"
PERSONA["loki"].Aura = "jojo_aura_red"
PERSONA["loki"].Name = "Loki"

PERSONA["cendrillon"] = {}
PERSONA["cendrillon"].Model = "models/cpthazama/persona5/persona/cendrillon.mdl"
PERSONA["cendrillon"].Aura = "jojo_aura_blue"
PERSONA["cendrillon"].Name = "Cendrillon"

PERSONA["ariadne_picaro"] = {}
PERSONA["ariadne_picaro"].Model = "models/cpthazama/persona5/persona/ariadne_picaro.mdl"
PERSONA["ariadne_picaro"].Aura = "jojo_aura_blue"
PERSONA["ariadne_picaro"].Name = "Ariadne Picaro"

PERSONA["yoshitsune"] = {}
PERSONA["yoshitsune"].Model = "models/cpthazama/persona5/persona/yoshitsune.mdl"
PERSONA["yoshitsune"].Aura = "jojo_aura_blue"
PERSONA["yoshitsune"].Name = "Yoshitsune"

PERSONA["hypnos"] = {}
PERSONA["hypnos"].Model = "models/cpthazama/persona3/persona/hypnos.mdl"
PERSONA["hypnos"].Aura = "jojo_aura_red"
PERSONA["hypnos"].Name = "Hypnos"

PERSONA["medea"] = {}
PERSONA["medea"].Model = "models/cpthazama/persona3/persona/medea.mdl"
PERSONA["medea"].Aura = "jojo_aura_red"
PERSONA["medea"].Name = "Medea"

PERSONA["hastur"] = {}
PERSONA["hastur"].Model = "models/cpthazama/persona5/persona/hastur.mdl"
PERSONA["hastur"].Aura = "jojo_aura_red"
PERSONA["hastur"].Name = "Hastur"

PERSONA["azathoth"] = {}
PERSONA["azathoth"].Model = "models/cpthazama/persona5/persona/azathoth.mdl"
PERSONA["azathoth"].Aura = "jojo_aura_red"
PERSONA["azathoth"].Name = "Azathoth"

PERSONA["orpheus"] = {}
PERSONA["orpheus"].Model = "models/cpthazama/persona3/persona/orpheus.mdl"
PERSONA["orpheus"].Aura = "jojo_aura_blue"
PERSONA["orpheus"].Name = "Orpheus"

PERSONA["messiah"] = {}
PERSONA["messiah"].Model = "models/cpthazama/persona3/persona/messiah.mdl"
PERSONA["messiah"].Aura = "jojo_aura_blue"
PERSONA["messiah"].Name = "Messiah"

PERSONA["robinhood"] = {}
PERSONA["robinhood"].Model = "models/cpthazama/persona5/persona/robinhood.mdl"
PERSONA["robinhood"].Aura = "jojo_aura_blue"
PERSONA["robinhood"].Name = "Robin-Hood"

PERSONA["arsene"] = {}
PERSONA["arsene"].Model = "models/cpthazama/persona5/persona/arsene.mdl"
PERSONA["arsene"].Aura = "jojo_aura_blue"
PERSONA["arsene"].Name = "Arsene"

PERSONA["asterius"] = {}
PERSONA["asterius"].Model = "models/cpthazama/persona4/persona/asterius.mdl"
PERSONA["asterius"].Aura = "jojo_aura_red"
PERSONA["asterius"].Name = "Asterius"

PERSONA["tomoe"] = {}
PERSONA["tomoe"].Model = "models/cpthazama/persona4/persona/tomoe.mdl"
PERSONA["tomoe"].Aura = "jojo_aura_blue"
PERSONA["tomoe"].Name = "Tomoe"

PERSONA["sakuya"] = {}
PERSONA["sakuya"].Model = "models/cpthazama/persona4/persona/sakuya.mdl"
PERSONA["sakuya"].Aura = "jojo_aura_blue"
PERSONA["sakuya"].Name = "Konohana Sakuya"

-- PERSONA["hereward"] = {}
-- PERSONA["hereward"].Model = "models/cpthazama/persona5/persona/hereward.mdl"
-- PERSONA["hereward"].Aura = "jojo_aura_red"
-- PERSONA["hereward"].Name = "Hereward"

-- PERSONA["reaper"] = {}
-- PERSONA["reaper"].Model = "models/cpthazama/persona5/persona/reaper.mdl"
-- PERSONA["reaper"].Aura = "jojo_aura_red"
-- PERSONA["reaper"].Name = "The Reaper"

game.AddParticles("particles/magatsu_izanagi.pcf")
local pParticleList = {
	"fo4_libertyprime_impact",
	"fo4_libertyprime_laser"
}
for _,v in ipairs(pParticleList) do PrecacheParticleSystem(v) end

local ENT = FindMetaTable("Entity")

function ENT:PlayInstaKillTheme(ents,t,ft)
	local function song(v,t,ft)
		if v.InstaKillTheme then v.InstaKillTheme:Stop() end
		v.InstaKillTheme = CreateSound(v,"cpthazama/persona5/instakill.wav")
		v.InstaKillTheme:SetSoundLevel(0)
		v.InstaKillTheme:Play()
		v.InstaKillTheme:ChangeVolume(1)
		v.InstaKillThemeID = v.InstaKillThemeID && v.InstaKillThemeID +1 or 1
		local id = v.InstaKillThemeID
		timer.Simple(t,function()
			if v.InstaKillTheme && v.InstaKillTheme:IsPlaying() && v.InstaKillThemeID == id then
				v.InstaKillTheme:FadeOut(ft)
			end
		end)
	end

	for _,v in pairs(ents) do
		if IsValid(v) && v:IsPlayer() then
			song(v,t,ft)
		end
	end
end